<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blackjack - Frontend</title>
    <script>
        const API_URL = "http://localhost:8080/blackjack";

        // Função para fazer requisições para o backend
        async function fazerRequisicao(endpoint, metodo = 'GET', dados = null) {
            const config = {
                method: metodo,
                headers: {
                    "Content-Type": "application/json"
                }
            };
            if (dados) {
                config.body = JSON.stringify(dados);
            }

            const response = await fetch(`${API_URL}${endpoint}`, config);
            const data = await response.json();
            return data;
        }

        // Adicionar jogador
        async function adicionarJogador() {
            const nome = document.getElementById('nomeJogador').value;
            if (!nome) {
                alert("Por favor, insira um nome.");
                return;
            }
            const response = await fazerRequisicao('/adicionar', 'POST', { nome });
            alert(response);
        }

        // Iniciar o jogo
        async function iniciarJogo() {
            const response = await fazerRequisicao('/iniciar', 'POST');
            alert(response);
        }

        // Comprar carta
        async function comprarCarta() {
            const nome = document.getElementById('nomeJogadorComprar').value;
            if (!nome) {
                alert("Por favor, insira o nome do jogador.");
                return;
            }
            const response = await fazerRequisicao(`/comprar/${nome}`, 'POST');
            alert(response);
        }

        // Finalizar o jogo
        async function finalizarJogo() {
            const response = await fazerRequisicao('/finalizar', 'GET');
            alert(response);
        }

        // Visualizar o deck
        async function verDeck() {
            const deck = await fazerRequisicao('/cartas', 'GET');
            const cartasContainer = document.getElementById('cartas');
            cartasContainer.innerHTML = JSON.stringify(deck);
        }

        // Estourar o jogo (eliminar jogador)
        async function estourarJogador() {
            const nome = document.getElementById('nomeJogadorEstourou').value;
            if (!nome) {
                alert("Por favor, insira o nome do jogador.");
                return;
            }
            const response = await fazerRequisicao(`/estourou/${nome}`, 'POST');
            alert(response);
        }

        // Obter o próximo jogador
        async function proximoJogador() {
            const jogador = await fazerRequisicao('/proximoJogador', 'GET');
            alert(`Próximo jogador: ${jogador.nome}`);
        }

        // Exibir lista de jogadores
        async function exibirJogadores() {
            const jogadores = await fazerRequisicao('/jogadores', 'GET');
            const listaJogadores = document.getElementById('jogadores');
            listaJogadores.innerHTML = jogadores.map(jogador => jogador.nome).join('<br>');
        }
    </script>
</head>
<body>
    <h1>Blackjack</h1>

    <h2>Adicionar Jogador</h2>
    <input type="text" id="nomeJogador" placeholder="Nome do Jogador" />
    <button onclick="adicionarJogador()">Adicionar Jogador</button>

    <h2>Iniciar Jogo</h2>
    <button onclick="iniciarJogo()">Iniciar Jogo</button>

    <h2>Comprar Carta</h2>
    <input type="text" id="nomeJogadorComprar" placeholder="Nome do Jogador" />
    <button onclick="comprarCarta()">Comprar Carta</button>

    <h2>Ver Deck</h2>
    <button onclick="verDeck()">Ver Cartas no Deck</button>
    <div id="cartas"></div>

    <h2>Finalizar Jogo</h2>
    <button onclick="finalizarJogo()">Finalizar Jogo</button>

    <h2>Estourou (Eliminar Jogador)</h2>
    <input type="text" id="nomeJogadorEstourou" placeholder="Nome do Jogador" />
    <button onclick="estourarJogador()">Estourou!</button>

    <h2>Próximo Jogador</h2>
    <button onclick="proximoJogador()">Próximo Jogador</button>

    <h2>Lista de Jogadores</h2>
    <button onclick="exibirJogadores()">Exibir Jogadores</button>
    <div id="jogadores"></div>

</body>
</html>
